module OV7670(
	input Reset,
	output [11:0] PixelData,
	output [14:0] PAddress,
	output reg WPixel=1'b0,
	input Pclock,
	input Href,
	input Vsync,
	input [7:0] Data
);


reg Href_prev=1'b0;
reg [7:0] XPixel=1'b0;
reg [7:0] YPixel=1'b0;
reg Sync=1'b0;

assign PAddress = XPixel + YPixel*8'd176;


always @(posedge Pclock)begin


if(Vsync==1'b1)begin
	Sync=1'b0;
	WPixel=1'b0;
	XPixel=1'b0;
	YPixel=1'b0;
end
else if(Href==1'b0 && Href_prev==1'b1)begin
	Sync=1'b0;
	WPixel=1'b0;
	XPixel=1'b0;
	YPixel=Ypixel+1'b1;
end
else if(Href==1'b1)begin
	if(Sync==1'b0)begin
		PixelData[11:4]=Data;
		Sync=1'b1;
		WPixel=1'b0;
	end
	else begin
		PixelData[3:0]=Data[7:4];
		XPixel=Xpixel+1'b1;
		Sync=1'b0;
		WPixel=1'b1;
	end
end


Href_prev=Href;








end



endmodule
